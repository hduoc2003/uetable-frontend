(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5688],{25083:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"}},86181:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"}},77731:function(e,t,r){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;let n=(s=r(90986))&&s.__esModule?s:{default:s};t.default=n,e.exports=n},25747:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var a=n?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(s,l,a):s[l]=e[l]}return s.default=e,r&&r.set(e,s),s}(r(2265)),n=_interop_require_default(r(25083)),l=_interop_require_default(r(51718));function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}var a=s.forwardRef(function(e,t){var r,a;return s.createElement(l.default,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},s=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),s.forEach(function(t){var s;s=r[t],t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s})}return e}({},e),a=a={ref:t,icon:n.default},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r.push.apply(r,s)}return r})(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))}),r))})},90986:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var a=n?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(s,l,a):s[l]=e[l]}return s.default=e,r&&r.set(e,s),s}(r(2265)),n=_interop_require_default(r(86181)),l=_interop_require_default(r(51718));function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}var a=s.forwardRef(function(e,t){var r,a;return s.createElement(l.default,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},s=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),s.forEach(function(t){var s;s=r[t],t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s})}return e}({},e),a=a={ref:t,icon:n.default},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r.push.apply(r,s)}return r})(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))}),r))})},46849:function(e,t,r){Promise.resolve().then(r.bind(r,35994))},75826:function(e,t,r){"use strict";var s=r(92173),n=r(99110),l=r(99231),a=r.n(l);let i=new n.Z,c=s.Z.create({baseURL:"http://localhost:8000/api"});c.interceptors.request.use(e=>{let t=i.get("authToken");return a()(t)||(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e.data,e=>e.response?Promise.reject({status:e.response.status,data:e.response.data}):Promise.reject(e.request?e.request:e.message)),t.Z=c},35994:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Profile}});var s=r(57437),n=r(2265),l=r(9547),a=r(25747),i=r(91492),c=r(60077),o=r(35302),d=r(54637),u=r(2114),f=r(80568),x=r(16691),h=r.n(x),p=r(75826),m=r(99110),j=r(74548),g=r.n(j);r(93330);var b=r(24033),v=r(82881),y=r(53729),N=r(3198),w=r(58837),O=r(25418);let{Paragraph:P,Text:_,Title:C}=o.default,S=new m.Z;function Profile(e){let{searchParams:{studentid:t}}=e,[r,o]=(0,n.useState)(""),[x,m]=(0,n.useState)(""),[j,k]=(0,n.useState)(""),[M,D]=(0,n.useState)(""),[Z,W]=(0,n.useState)(!1),[R,q]=(0,n.useState)(!0),[E,A]=(0,n.useState)(!0),[T,z]=(0,n.useState)(!0),[B,I]=(0,n.useState)(!1),[V,Y]=(0,n.useState)([]),F=(0,b.useRouter)(),[H,G]=(0,n.useState)(20),U=S.get("studentid"),[L,J]=(0,n.useState)(""),[K,$]=(0,n.useState)(null),Q=(0,N.I0)(),{avtLink:X}=(0,N.v9)(O.a);return(0,n.useEffect)(()=>{t!=U&&I(!0),p.Z.get("/users/"+t).then(e=>{J(e.avatar),k(e.studentId),o(e.name),m(e.date),D(e.bio)}).catch(e=>{401==e.response.status?F.push("/signin"):404==e.response.status&&F.push("/")}),p.Z.get("/document/getMyDocumentByStudentId",{params:{studentId:t}}).then(e=>{for(let t=0;t<e.length;t++){let r=e[t].createdAt.split("-"),s=r[2].split("T");e[t].createdAt=s[0]+"/"+r[1]+"/"+r[0]}Y(e)}).catch(e=>{})},[t,U,B,F,Q]),(0,n.useEffect)(()=>{G(20),X?(W(!0),G(e=>e+30)):W(!1),M?(z(!0),G(e=>e+20)):z(!1),r&&j&&x?(A(!0),G(e=>e+30)):A(!1)},[M,r,X,x,j]),(0,s.jsxs)("main",{className:"",children:[(0,s.jsx)(C,{level:2,className:"ml-5 mt-3",children:"Hồ sơ"}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("div",{className:"bg-white border rounded-2xl shadow w-full ml-layout-el",children:[B?(0,s.jsxs)("div",{className:"flex p-12 gap-[150px] items-center",children:[(0,s.jsx)(u.ZP,{src:L,className:"",alt:"Profile Pic",size:100}),(0,s.jsxs)("div",{className:"flex-col",children:[(0,s.jsx)("label",{className:"font-light text-gray-500",children:"Họ v\xe0 t\xean"}),(0,s.jsx)(P,{className:"font-semibold text-lg pt-3",children:r})]}),(0,s.jsxs)("div",{className:"flex-col",children:[(0,s.jsx)("label",{className:"font-light text-gray-500",children:"Ng\xe0y sinh"}),(0,s.jsx)(P,{className:"font-semibold text-lg pt-3",children:x})]}),(0,s.jsxs)("div",{className:"flex-col",children:[(0,s.jsx)("label",{className:"font-light text-gray-500",children:"M\xe3 số sinh vi\xean"}),(0,s.jsx)(P,{className:"font-semibold text-lg pt-3",children:j})]})]}):(0,s.jsxs)("div",{className:"flex p-10 gap-6 items-center",children:[(0,s.jsx)(u.ZP,{src:X,className:"",alt:"Profile Pic",size:100}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r?$(r):$(null)},className:"w-full text-sm text-slate-500   file:mr-4 file:py-2 file:px-4   file:rounded-full file:border-0   file:text-sm file:font-semibold   file:bg-primary file:text-white   hover:file:bg-dark-primary   "}),(0,s.jsx)(v.Z,{onClick:()=>{if(K){let e=K.name.split(".").pop();if(e&&["jpg","jpeg","png"].includes(e)){let e=new FileReader;e.onload=e=>{if(e.target){let t=e.target.result;Q(w.Y.updateAuthState({avtLink:t})),W(!0)}},e.readAsDataURL(K);let t=new FormData;t.append("up",K),p.Z.post("/users/changeAvatar",t,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{}).catch(e=>{})}else alert("Vui l\xf2ng upload ảnh bằng JPG hoặc PNG.")}},className:"border-2 px-4 py-[6px] rounded-full",children:(0,s.jsx)(_,{strong:!0,children:"Tải l\xean"})})]}),(0,s.jsx)(_,{type:"secondary",children:"Upload ảnh đại diện mới bằng JPG hoặc PNG"})]})]}),(0,s.jsxs)("div",{className:"w-full border-t-2 flex flex-col items-center p-10",children:[!B&&(0,s.jsxs)("div",{className:"w-full bg-white border rounded-2xl hover:shadow hover:bg-gray-100",children:[(0,s.jsx)("div",{className:"flex p-6 justify-between",children:(0,s.jsx)("text",{className:"font-bold text-2xl",children:"Th\xf4ng tin c\xe1 nh\xe2n"})}),(0,s.jsxs)("div",{className:"flex gap-[120px] px-6 pb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsx)("label",{className:"font-light text-gray-500",children:"Họ v\xe0 t\xean"}),(0,s.jsx)(y.Z,{defaultValue:r,normalText:(0,s.jsx)(_,{strong:!0,className:"text-lg",children:r}),onComplete:e=>{Q(w.Y.updateAuthState({name:e})),o(e),p.Z.put("/users/",{name:e,avatar:X,birth:x}).then(e=>{}).catch(e=>{})}})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsx)("label",{className:"font-light text-gray-500",children:"Ng\xe0y sinh"}),(0,s.jsx)(f.default,{className:"font-semibold text-lg",onChange:(e,t)=>{m(t),p.Z.put("/users/",{name:r,avatar:X,birth:t}).then(e=>{}).catch(e=>{})},value:g()(x,"YYYY-MM-DD")})]}),(0,s.jsxs)("div",{className:"flex-col",children:[(0,s.jsx)("div",{className:"font-light text-gray-500",children:"M\xe3 số sinh vi\xean"}),(0,s.jsx)(P,{className:"font-semibold text-lg pt-3",children:j})]})]})]}),B?M&&(0,s.jsxs)("div",{className:"w-full bg-white border rounded-2xl hover:shadow hover:bg-gray-100 m-10",children:[(0,s.jsx)("div",{className:"flex p-6 justify-between",children:(0,s.jsx)("div",{className:"font-bold text-2xl",children:"Giới thiệu"})}),(0,s.jsx)(P,{className:" px-6 pb-6 text-xl font-semibold pt-3",children:M})]}):(0,s.jsxs)("div",{className:"w-full bg-white border rounded-2xl hover:shadow hover:bg-gray-100 m-10 p-5 flex flex-col gap-5",children:[(0,s.jsx)("div",{className:"font-bold text-2xl",children:"Giới thiệu"}),(0,s.jsx)(y.Z,{defaultValue:M,normalText:M?(0,s.jsx)(_,{className:"text-lg",children:M}):(0,s.jsx)(_,{type:"secondary",italic:!0,children:"Chưa cập nhật th\xf4ng tin"}),type:"textarea",onComplete:e=>{D(e),p.Z.post("/users/changeBio",{bio:e}).then(e=>{}).catch(e=>{})},className:"w-full"})]}),(0,s.jsxs)("div",{className:"w-full bg-white border rounded-2xl hover:shadow p-6",children:[(0,s.jsx)("div",{className:"font-bold text-2xl mb-4",children:"T\xe0i liệu"}),(0,s.jsx)("div",{children:V.map(e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"border hover:bg-gray-100 hover:shadow bg-white p-6 m-4 flex cursor-pointer",onClick:()=>{F.push("/all-subjects/documents/details?documentId="+e.id)},children:["pdf"==e.link.slice(-3)?(0,s.jsx)(h(),{src:"https://i.imgur.com/WccjHlP.png",height:100,width:100,alt:"Document Image",className:"mr-5"}):(0,s.jsx)(h(),{src:"https://i.imgur.com/sYktWfS.png",height:100,width:100,alt:"Document Image",className:"mr-5"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{className:"text-blue-400 text-2xl",children:e.name}),(0,s.jsxs)("p",{className:"",children:["M\xf4n học: ",e.subjectName]}),(0,s.jsxs)("p",{className:"text-sm",children:["Upload bởi: ",r]}),(0,s.jsxs)("div",{className:"flex gap-10",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("p",{children:e.like}),(0,s.jsx)(l.Z,{})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("p",{children:e.download}),(0,s.jsx)(a.default,{})]}),(0,s.jsx)("p",{children:e.createdAt})]})]})]})}))})]})]})]}),!B&&(0,s.jsxs)("div",{className:"ml-8 mr-layout-el bg-white border rounded-2xl shadow flex flex-col p-6 gap-3 h-max-full",children:[(0,s.jsx)("text",{className:"font-bold text-xl",children:"Ho\xe0n th\xe0nh profile"}),(0,s.jsx)(d.default,{type:"circle",percent:H,strokeColor:"#1dc14e",strokeWidth:10,size:200,className:"mb-5"}),R?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{style:{color:"green"},children:(0,s.jsx)(i.default,{})}),(0,s.jsx)("p",{className:"font-medium text-sm",children:"K\xedch hoạt t\xe0i khoản"})]}):(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(c.default,{}),(0,s.jsx)("p",{className:"font-medium text-gray-400 text-sm",children:"K\xedch hoạt t\xe0i khoản"})]}),Z?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{style:{color:"green"},children:(0,s.jsx)(i.default,{})}),(0,s.jsx)("p",{className:"font-medium text-sm",children:"Cập nhật ảnh đại diện"})]}):(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(c.default,{}),(0,s.jsx)("p",{className:"font-medium text-gray-400 text-sm",children:"Cập nhật ảnh đại diện"})]}),E?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{style:{color:"green"},children:(0,s.jsx)(i.default,{})}),(0,s.jsx)("p",{className:"font-medium text-sm",children:"Th\xf4ng tin c\xe1 nh\xe2n"})]}):(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(c.default,{}),(0,s.jsx)("p",{className:"font-medium text-gray-400 text-sm",children:"Th\xf4ng tin c\xe1 nh\xe2n"})]}),T?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{style:{color:"green"},children:(0,s.jsx)(i.default,{})}),(0,s.jsx)("p",{className:"font-medium text-sm",children:"Cập nhật Bio"})]}):(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(c.default,{}),(0,s.jsx)("p",{className:"font-medium text-gray-400 text-sm",children:"Cập nhật Bio"})]})]})]})]})}},82881:function(e,t,r){"use strict";r.d(t,{Z:function(){return MyButtonWrapper}});var s=r(57437),n=r(88110),l=r.n(n),a=r(49385),i=r(2265),c=r(23986),o=r(44143),d=r(25727),u=r.n(d),f=r(54952),x=r(52410);function MyButtonWrapper(e){var t;let{displayChildrenWhenLoading:r=!0}=e,n="p-1 h-fit w-fit  border-0 group hover:!border-contrast hover:!text-contrast",[d,h]=(0,i.useState)(null!==(t=e.loading)&&void 0!==t&&t),p=(0,i.useCallback)(()=>{j(!0),setTimeout(()=>{var t;j(!1),h(!1),null===(t=e.onDoneAnimationEnd)||void 0===t||t.call(e)},1500)},[e]),[m,j]=(0,i.useState)(!1);return e.rounded&&(n+=" rounded-full"),(0,s.jsx)(l(),{...u()(e,["rounded","loading"]),onClick:t=>{var r;(0,o.$)(e.onClick)?(h(!0),e.onClick().then(()=>{p()})):null===(r=e.onClick)||void 0===r||r.call(e,t)},className:(0,c.m)(n,e.className),disabled:d&&!m,children:(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[d?r&&e.children:e.children,d&&(m?(0,s.jsx)(x.DVR,{size:"1.2em"}):(0,s.jsx)(a.default,{indicator:(0,s.jsx)(f.default,{}),className:"text-current"}))]})})}},53729:function(e,t,r){"use strict";r.d(t,{Z:function(){return EditableText}});var s=r(57437),n=r(43574),l=r(2265),a=r(23986);function EditableText(e){let{defaultValue:t,placeholder:r,normalText:i,editing:c=!1,mode:o="editable",onComplete:d,onStartEditing:u,type:f="input",className:x}=e,[h,p]=(0,l.useState)(()=>c),m=(0,l.useRef)(null),j=(0,l.useRef)(""),handleComplete=()=>{var e,t,r;p(!1),"input"===f?null==d||d(null!==(r=null===(t=m.current)||void 0===t?void 0:null===(e=t.input)||void 0===e?void 0:e.value)&&void 0!==r?r:""):null==d||d(j.current)},g="input"===f?n.default:n.default.TextArea;return h?(0,s.jsx)(g,{ref:m,className:(0,a.m)("w-fit editable-text p-0 border-0 border-b-2 rounded-none",x),placeholder:r,defaultValue:t,onPressEnter:handleComplete,classNames:{textarea:"text-fs-inherit",input:"text-fs-inherit"},autoFocus:!0,onBlur:handleComplete,autoSize:{minRows:3},..."textarea"===f?{onChange(e){j.current=e.target.value}}:void 0}):(0,s.jsxs)("button",{onClick:()=>{"editable"===o&&(null==u||u(),p(!0))},className:"text-left ".concat("editable"===o?"cursor-pointer":"cursor-default"),children:[i,(0,s.jsx)("div",{className:"h-[2px]"})]})}},25418:function(e,t,r){"use strict";r.d(t,{a:function(){return authSelector}});let authSelector=e=>e.auth},58837:function(e,t,r){"use strict";r.d(t,{Y:function(){return l},d:function(){return n}});var s=r(98340);let{reducer:n,actions:l}=(0,s.oM)({name:"auth",initialState:{signedIn:!1,logging:!0,role:"user",studentId:""},reducers:{updateAuthState:function(e,t){return{...e,...t.payload}}}})},44143:function(e,t,r){"use strict";function isUndefined(e){return void 0===e}function isAsyncFunction(e){return!!e&&"AsyncFunction"===e.constructor.name}r.d(t,{$:function(){return isAsyncFunction},o:function(){return isUndefined}})}},function(e){e.O(0,[2400,9020,1718,9273,2808,350,260,3986,3954,8110,9385,6912,3574,2838,413,4343,3524,2971,2472,1744],function(){return e(e.s=46849)}),_N_E=e.O()}]);